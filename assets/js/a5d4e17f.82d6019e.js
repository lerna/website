"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[536],{3905:(e,n,t)=>{t.d(n,{Zo:()=>l,kt:()=>h});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},l=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=u(t),h=a,m=d["".concat(s,".").concat(h)]||d[h]||p[h]||o;return t?r.createElement(m,c(c({ref:n},l),{},{components:t})):r.createElement(m,c({ref:n},l))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,c=new Array(o);c[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var u=2;u<o;u++)c[u]=t[u];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},854:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var r=t(7462),a=(t(7294),t(3905));const o={id:"share-your-cache",title:"Share Your Cache",type:"recipe"},c="Share Your Cache",i={unversionedId:"features/share-your-cache",id:"features/share-your-cache",title:"Share Your Cache",description:"The computation cache provided by Lerna can be distributed across multiple machines. You can either build an implementation",source:"@site/docs/features/share-your-cache.md",sourceDirName:"features",slug:"/features/share-your-cache",permalink:"/docs/features/share-your-cache",draft:!1,editUrl:"https://github.com/lerna/lerna/tree/main/website/docs/features/share-your-cache.md",tags:[],version:"current",frontMatter:{id:"share-your-cache",title:"Share Your Cache",type:"recipe"},sidebar:"main",previous:{title:"Cache Task Results",permalink:"/docs/features/cache-tasks"},next:{title:"Explore the Project Graph",permalink:"/docs/features/project-graph"}},s={},u=[{value:"Connecting Your Workspace to Your Nx Cloud Account",id:"connecting-your-workspace-to-your-nx-cloud-account",level:2},{value:"Skipping Cloud",id:"skipping-cloud",level:2}],l={toc:u};function p(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"share-your-cache"},"Share Your Cache"),(0,a.kt)("p",null,"The computation cache provided by Lerna can be distributed across multiple machines. You can either build an implementation\nof the cache or use Nx Cloud. Nx Cloud is an app that provides a fast and zero-config implementation of distributed\ncaching. It's completely free for OSS projects and for most closed-sourced\nprojects (",(0,a.kt)("a",{parentName:"p",href:"https://dev.to/nrwl/more-time-saved-for-free-with-nx-cloud-4a2j"},"read more here"),")."),(0,a.kt)("p",null,"You can connect your workspace to Nx Cloud by running:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npx nx connect-to-nx-cloud\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Terminal Output"',title:'"Terminal','Output"':!0},"\u2714 Enable distributed caching to make your CI faster \xb7 Yes\n\n>  NX  Generating @nrwl/nx-cloud:init\n\nUPDATE nx.json\n\n >  NX   Distributed caching via Nx Cloud has been enabled\n\n   In addition to the caching, Nx Cloud provides config-free distributed execution,\n   UI for viewing complex runs and GitHub integration. Learn more at https://nx.app\n\n   Your workspace is currently unclaimed. Run details from unclaimed workspaces can be viewed on cloud.nx.app by anyone\n   with the link. Claim your workspace at the following link to restrict access.\n\n   https://cloud.nx.app/orgs/workspace-setup?accessToken=YOURACCESSTOKEN\n")),(0,a.kt)("p",null,"To see the remote cache in action, run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"lerna run build --scope=header && nx reset && lerna run build --scope=header\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Terminal Output"',title:'"Terminal','Output"':!0},"> lerna run build --scope=header\n\n> header@0.0.0 build\n> rimraf dist && rollup --config\n\nsrc/index.tsx \u2192 dist...\ncreated dist in 786ms\n\n \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n >  Lerna (powered by Nx)   Successfully ran target build for project header (2s)\n\n   See logs and investigate cache misses at https://cloud.nx.app/runs/k0HDHACpL8\n\n\n >  NX   Resetting the Nx workspace cache and stopping the Nx Daemon.\n\n   This might take a few minutes.\n\n\n >  NX   Daemon Server - Stopped\n\n\n >  NX   Successfully reset the Nx workspace.\n\n\n> lerna run build --scope=header  [remote cache]\n\n\n> header@0.0.0 build\n> rimraf dist && rollup --config\n\n\nsrc/index.tsx \u2192 dist...\ncreated dist in 786ms\n\n \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n >  Lerna (powered by Nx)   Successfully ran target build for project header (664ms)\n\n   Nx read the output from the cache instead of running the command for 1 out of 1 tasks.\n\n   Nx Cloud made it possible to reuse header: https://nx.app/runs/P0X6ZGTkqZ\n")),(0,a.kt)("h2",{id:"connecting-your-workspace-to-your-nx-cloud-account"},"Connecting Your Workspace to Your Nx Cloud Account"),(0,a.kt)("p",null,"After you have enabled Nx Cloud in your workspace, you will see the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},">  NX   NOTE  Nx Cloud has been enabled\n\n  Your workspace is currently public. Anybody with code access\n  can view the workspace on nx.app.\n\n  You can connect the workspace to your Nx Cloud account at\n  https://nx.app/orgs/workspace-setup?accessToken=N2Y3NzcyO...\n  (You can do this later.)\n")),(0,a.kt)("p",null,"Click on this link to associate the workspace with your Nx Cloud account. If you don't have an Nx Cloud account, you can\ncreate one on the spot."),(0,a.kt)("p",null,"After you claim your workspace, you will be able to manage permissions, create access tokens, set up billing, and so\nforth."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"You will also see an interactive tutorial helping you explore distributed caching and the Nx Cloud user interface.")),(0,a.kt)("p",null,"If you lose this link, you can still connect your workspace to Nx Cloud. Go to ",(0,a.kt)("a",{parentName:"p",href:"https://nx.app"},"nx.app"),", create an\naccount, and connect your workspace using the access token from ",(0,a.kt)("inlineCode",{parentName:"p"},"nx.json"),"."),(0,a.kt)("h2",{id:"skipping-cloud"},"Skipping Cloud"),(0,a.kt)("p",null,"Similar to how ",(0,a.kt)("inlineCode",{parentName:"p"},"--skip-nx-cache")," will instruct Nx not to use the cache, passing ",(0,a.kt)("inlineCode",{parentName:"p"},"--no-cloud")," will tell Nx not to use Nx\nCloud."))}p.isMDXComponent=!0}}]);