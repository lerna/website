"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[180],{516:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"features/share-your-cache","title":"Share Your Cache","description":"The computation cache provided by Lerna can be distributed across multiple machines. You can either build an implementation","source":"@site/docs/features/share-your-cache.md","sourceDirName":"features","slug":"/features/share-your-cache","permalink":"/docs/features/share-your-cache","draft":false,"unlisted":false,"editUrl":"https://github.com/lerna/lerna/tree/main/website/docs/features/share-your-cache.md","tags":[],"version":"current","frontMatter":{"id":"share-your-cache","title":"Share Your Cache","type":"recipe"},"sidebar":"main","previous":{"title":"Cache Task Results","permalink":"/docs/features/cache-tasks"},"next":{"title":"Explore the Project Graph","permalink":"/docs/features/project-graph"}}');var o=r(4848),a=r(8453);const s={id:"share-your-cache",title:"Share Your Cache",type:"recipe"},c="Share Your Cache",i={},d=[{value:"Skipping Cloud",id:"skipping-cloud",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"share-your-cache",children:"Share Your Cache"})}),"\n",(0,o.jsxs)(n.p,{children:["The computation cache provided by Lerna can be distributed across multiple machines. You can either build an implementation\nof the cache or use Nx Cloud. Nx Cloud is an app that provides a fast and zero-config implementation of distributed\ncaching. It's completely free for OSS projects and for most closed-sourced\nprojects (",(0,o.jsx)(n.a,{href:"https://dev.to/nrwl/more-time-saved-for-free-with-nx-cloud-4a2j",children:"read more here"}),")."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Connecting your workspace to Nx Cloud is easy via the interactive, browser-baseed workflow."})," You can start the process by running the following command from your lerna workspace root which will automatically open a browser window to your unique connection URL:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal Output"',children:"npx nx connect-to-nx-cloud\n\n\u2714 Opening Nx Cloud https://cloud.nx.app/connect/abc123456 in your browser to connect your workspace.\n"})}),"\n",(0,o.jsx)(n.p,{children:"To see the remote cache in action, run:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"lerna run build --scope=header && nx reset && lerna run build --scope=header\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal Output"',children:"> lerna run build --scope=header\n\n> header@0.0.0 build\n> rimraf dist && rollup --config\n\nsrc/index.tsx \u2192 dist...\ncreated dist in 786ms\n\n \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n Lerna (powered by Nx)   Successfully ran target build for project header (2s)\n\n   See logs and investigate cache misses at https://cloud.nx.app/runs/k0HDHACpL8\n\n\n >  NX   Resetting the Nx workspace cache and stopping the Nx Daemon.\n\n   This might take a few minutes.\n\n\n >  NX   Daemon Server - Stopped\n\n\n >  NX   Successfully reset the Nx workspace.\n\n\n> lerna run build --scope=header  [remote cache]\n\n\n> header@0.0.0 build\n> rimraf dist && rollup --config\n\n\nsrc/index.tsx \u2192 dist...\ncreated dist in 786ms\n\n \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n Lerna (powered by Nx)   Successfully ran target build for project header (664ms)\n\n   Nx read the output from the cache instead of running the command for 1 out of 1 tasks.\n\n   Nx Cloud made it possible to reuse header: https://nx.app/runs/P0X6ZGTkqZ\n"})}),"\n",(0,o.jsx)(n.h2,{id:"skipping-cloud",children:"Skipping Cloud"}),"\n",(0,o.jsxs)(n.p,{children:["Similar to how ",(0,o.jsx)(n.code,{children:"--skip-nx-cache"})," will instruct Nx not to use the cache, passing ",(0,o.jsx)(n.code,{children:"--no-cloud"})," will tell Nx not to use Nx\nCloud. You can also set ",(0,o.jsx)(n.code,{children:"NX_NO_CLOUD"})," to ",(0,o.jsx)(n.code,{children:"true"})," in your environment."]})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var t=r(6540);const o={},a=t.createContext(o);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);